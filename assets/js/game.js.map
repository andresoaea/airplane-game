{"version":3,"sources":["webpack:///src/js/vue-components/SetOpponent.vue","webpack:///./src/js/vue-components/SetOpponent.vue?98c6","webpack:///./src/js/vue-components/SetOpponent.vue?a3fc","webpack:///./src/js/GameData.js","webpack:///./src/js/Socket.js","webpack:///./src/js/components/Background.js","webpack:///./src/js/components/Map.js","webpack:///./src/js/components/Plane.js","webpack:///./src/js/components/Players.js","webpack:///./src/js/components/Turn.js","webpack:///./src/js/game.js","webpack:///./src/js/helpers.js","webpack:///./src/js/scenes/LoadScene.js","webpack:///./src/js/scenes/MainScene.js","webpack:///./src/js/scenes/SetPlaneScene.js","webpack:///./src/js/scenes/StartScene.js","webpack:///./src/js/vue-components/SetOpponent.vue","webpack:///./src/js/vue-components/SetOpponent.vue?a078","webpack:///./src/js/vue-components/SetOpponent.vue?35b5","webpack:///./src/js/vue-components/SetOpponent.vue?2fd9","webpack:///./src/sass/game.scss?4097"],"names":["GameData","imageNum","getId","players","player","id","name","getParameterByName","photo","turn","Turn","opponent","setPlaneScene","game","scene","getScene","playersComponent","Players","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","Socket","queryString","$","param","gameData","conn","WebSocket","onopen","e","console","log","onmessage","msg","JSON","parse","data","handleReceivedMessage","onerror","Swal","fire","title","text","icon","showConfirmButton","action","bus","$emit","room","setIsMyTurn","setOpponent","doOpponentDisconnected","doAttack","reverse","doSetOpponentData","opponentData","cellId","cellClicked","cellNum","rect","cells","myPlanesCells","includes","texture","add","image","centerX","centerY","setScale","start","readyState","CLOSED","send","stringify","Background","draw","x","y","squareWidth","opts","cellSize","cellsNum","i","j","drawSingleRect","Phaser","Geom","Rectangle","graphics","lineStyle","width","zoom","color","strokeRectShape","Map","type","isMainScene","drawMap","drawRect","drawBorder","letters","length","letter","toUpperCase","drawText","dropZoneRect","setInteractive","Contains","owner","on","isEmptyObject","isMyTurn","scaleText","socket","planesCells","gph","fillStyle","fillRectShape","fontSize","fontFamily","setOrigin","setDepth","Plane","config","planeNum","existing","setData","input","setDraggable","dragStart","dragEnd","drag","planeName","stablePos","planeCells","isInDropZone","firstClickTime","pointer","gameObject","moveToFront","dragX","dragY","scaleOnDrag","checkDoubleTap","checkIfInDropZone","dropZone","getDropZone","height","repositionToClosest","setPlaneCells","goToInitialPosition","axis","isVertical","angle","repositionVertical","repositionHorizontal","closest","relativeDistance","newPos","tweens","targets","getData","scaleX","scaleY","duration","planes","setScaleNoZoom","objects","planesGameObjects","forEach","planeGameObject","splice","indexOf","push","headCellId","planeData","getPlanePositionData","headPoint","cell","headCords","split","map","num","parseInt","schema","originX","diff","originY","line","cellPlaceholder","currPlaneExists","Object","keys","instance","isOverlapping","checkOverlap","shift","otherPlaneCells","planeKey","overlap","lastClickTime","time","now","clickDelay","scale","GameObjects","Sprite","printBackground","printPlayer","loadOpponent","textures","exists","printOpponent","load","printPlayerPhoto","printPlayerName","defaultWidth","key","shape","fillRoundedRect","mask","createGeometryMask","img","setMask","displayWidth","displayHeight","stroke","strokeThickness","printTurnText","updateTurnText","bool","getTurnText","setTimeout","setText","setColor","tween","yoyo","onComplete","require","Helpers","getDevicePixelRatio","AUTO","parent","version","Game","defaultHeight","Vue","LoadScene","MainScene","StartScene","SetPlaneScene","render","h","SetOpponent","$mount","mediaQuery","is_firefox","navigator","userAgent","toLowerCase","devicePixelRatio","undefined","matchMedia","matches","showPreloader","fontStyle","shadow","offsetX","offsetY","blur","fill","progressBar","progressBox","fillRect","cameras","main","loadingText","make","style","percentText","value","clear","destroy","Scene","planesData","myPlanes","setBackgroundColor","background","playerMap","opponentMap","drawPlanes","setScene","playerMapLeftDiff","plane","planeImage","setAngle","setAlpha","physics","arcade","plane1","plane2","addStartGame","mainScene","launch","bringToTop","useHandCursor","allPlanesCells","keysLength","stop","cl","playBtn","alpha","repeat","ease"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA,sBADA;AAEA,MAFA,kBAEA;AACA;AACA,iBADA;AAEA,wBAFA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHA;AAIA,sBAJA;AAKA;AALA;AAOA,GAVA;AAWA,SAXA,qBAWA;AAAA;;AACA;AACA;AAAA;AAAA;;AACA;AACA;AACA,KAJA;AAMA;AACA;AACA;AACA,KAHA;AAKA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA,KALA;AAOA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KARA;AASA,GAvCA;AAwCA;AACA,cADA,wBACA;AACA;AACA;AADA;AAGA,KALA;AAMA,YANA,sBAMA;AACA;AACA;AAAA;AAAA;;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BADA;AAEA;AAFA;AAIA,KAnBA;AAoBA,eApBA,uBAoBA,GApBA,EAoBA;AACA;AACA;AACA,KAvBA;AAwBA,eAxBA,uBAwBA,GAxBA,EAwBA;AACA;AACA;AACA,KA3BA;AA4BA,UA5BA,oBA4BA;AACA;AACA,KA9BA;AA+BA,0BA/BA,oCA+BA;AAAA;;AACA;AACA,0BADA;AAEA,kCAFA;AAGA,uBAHA;AAIA,gCAJA;AAKA;AALA,SAMA,IANA,CAMA;AACA;AACA;AACA,OATA;AAUA;AA1CA;AAxCA,G;;;;;;;;;;;AChDA,yC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,iCAAiC,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,iCAAiC,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,4CAA4C;AAC3E;AACA;AACA;AACA,0CAA0C,wBAAwB;AAClE;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,4CAA4C,6BAA6B;AACzE;AACA;AACA;AACA;AACA;AACA,0CAA0C,wBAAwB;AAClE;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6CAA6C;AAC5E;AACA,yCAAyC,8BAA8B;AACvE;AACA;AACA;AACA;AACA;AACA,mCAAmC,sCAAsC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,+BAA+B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,yCAAyC,sBAAsB;AAC/D,sCAAsC,6BAA6B;AACnE;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA,iCAAiC,qCAAqC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AClLA;AACA;;IAEMA,Q;AACF,sBAAc;AAAA;;AAAA;;AACV,QAAIC,QAAQ,GAAG,KAAKC,KAAL,MAAgB,CAAhB,GAAoB,CAApB,GAAwB,CAAvC,CADU,CAEV;;AACA,SAAKC,OAAL,GAAe;AACXC,YAAM,EAAE;AACJC,UAAE,EAAE,KAAKH,KAAL,EADA;AAEJI,YAAI,EAAE,mCAAU,KAAKC,kBAAL,CAAwB,QAAxB,CAAV,yEAA+C,GAA/C,CAFF;AAGJC,aAAK,kCAA2BP,QAA3B;AAHD;AADG,KAAf;AAQA,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","file":"/js/game.js","sourcesContent":["<template>\n  <div\n    v-if=\"show\"\n    class=\"scene-html w-full h-full absolute t-0 l-0 flex justify-center items-center animate__animated animate__fadeIn\"\n  >\n    <div\n      class=\"flex items-center justify-center text-center rounded animate__animated animate__backInDown\"\n    >\n      <div v-if=\"toShow ==='initRoom'\" class=\"flex w-full\">\n        <div class=\"col-create-room flex flex-1 justify-center items-center flex-col\">\n          <p class=\"text-gray-700 mb-2\">Create a room</p>\n          <button @click=\"createRoom()\" class=\"bg-pink-700 px-4 py-2 text-white rounded\">Create</button>\n        </div>\n        <div class=\"col-go-to-room flex flex-1 justify-center items-center flex-col\">\n          <p class=\"text-gray-700 mb-2\">Go to a room</p>\n          <ul>\n            <li v-for=\"(code,i) in codes\" :key=\"i\" class=\"flex flex-col mx-1\">\n              <i @click=\"increaseNum(i)\" class=\"fa fa-plus\" aria-hidden=\"true\"></i>\n              <!-- <input type=\"text\" v-model=\"codes[i].val\" /> -->\n              <span class=\"bg-gray-800\">{{ codes[i].val }}</span>\n              <i @click=\"decreaseNum(i)\" class=\"fa fa-minus\" aria-hidden=\"true\"></i>\n            </li>\n          </ul>\n          <button @click=\"goToRoom()\" class=\"bg-blue-700 mt-1 px-4 py-2 text-white rounded\">Go play</button>\n          <div v-if=\"roomError\" class=\"room-error text-center mt-2\">\n            <p class=\"text-red-600\">Invalid room code..</p>\n            <p class=\"text-red-600 text-xs\">Try again with another code.</p>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"toShow === 'roomCode'\">\n        <p class=\"text-gray-700\">Your opponent can connect to this room code:</p>\n        <ul class=\"room-generated flex justify-center my-3\">\n          <li v-for=\"num in roomCode.split('')\" class=\"mx-1\">\n            <span class=\"bg-gray-800\">{{ num}}</span>\n          </li>\n        </ul>\n        <small class=\"text-green-600 mt-2\">Waiting for opponent to connect...</small>\n        <button\n          @click=\"goBack()\"\n          class=\"go-back bg-blue-700 block mx-auto mt-4 px-4 py-2 text-white rounded\"\n        >Go back</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"set-opponent\",\n  data() {\n    return {\n      show: false,\n      toShow: \"initRoom\",\n      codes: [{ val: 0 }, { val: 0 }, { val: 0 }, { val: 0 }],\n      roomCode: \"0000\",\n      roomError: false\n    };\n  },\n  mounted() {\n    game.bus.$on(\"showSetOpponent\", () => {\n      this.codes.map(code => (code.val = 0));\n      this.toShow = \"initRoom\";\n      this.show = true;\n    });\n\n    game.bus.$on(\"ShowMyRoomId\", roomCode => {\n      this.roomCode = roomCode;\n      this.toShow = \"roomCode\";\n    });\n\n    game.bus.$on(\"PrintInvalidRoom\", () => {\n      this.roomError = true;\n      setTimeout(() => {\n        this.roomError = false;\n      }, 2000);\n    });\n\n    game.bus.$on(\"StartRoom\", roomToStart => {\n      if (roomToStart == this.roomCode) {\n        // This is the room initiator player\n        this.printOpponentConnected();\n      } else {\n        // This is the opponent\n        this.show = false;\n      }\n    });\n  },\n  methods: {\n    createRoom() {\n      game.scene.getScene(\"SetPlaneScene\").socket.send({\n        action: \"getMyRoom\"\n      });\n    },\n    goToRoom() {\n      if (this.roomError) return;\n      const roomToGo = this.codes.map(code => code.val).join(\"\");\n      if (roomToGo == this.roomCode) {\n        game.bus.$emit(\"PrintInvalidRoom\");\n        return;\n      }\n\n      game.gameData.turn.setIsMyTurn(false);\n      game.scene.getScene(\"SetPlaneScene\").socket.send({\n        action: \"goToRoom\",\n        room: roomToGo\n      });\n    },\n    increaseNum(key) {\n      if (this.codes[key].val >= 9) return;\n      this.codes[key].val++;\n    },\n    decreaseNum(key) {\n      if (this.codes[key].val <= 0) return;\n      this.codes[key].val--;\n    },\n    goBack() {\n      this.toShow = \"initRoom\";\n    },\n    printOpponentConnected() {\n      Swal.fire({\n        title: \"Let's go!\",\n        text: \"Opponent connected\",\n        icon: \"success\",\n        showConfirmButton: false,\n        timer: 2000\n      }).then(() => {\n        //console.log(\"execute then\");\n        this.show = false;\n      });\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\nul {\n  &:not(.room-generated) {\n    display: inherit;\n  }\n\n  li {\n    span {\n      width: 36px;\n      height: 36px;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      color: #eee;\n      border-radius: 2px;\n    }\n\n    i {\n      text-align: center;\n      // font-size: 40px;\n      // margin: -8px 0;\n      font-size: 23px;\n      margin: 3px 0;\n      cursor: pointer;\n      color: #2d3748;\n    }\n  }\n}\n</style>\n\n","// removed by extract-text-webpack-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.show\n    ? _c(\n        \"div\",\n        {\n          staticClass:\n            \"scene-html w-full h-full absolute t-0 l-0 flex justify-center items-center animate__animated animate__fadeIn\"\n        },\n        [\n          _c(\n            \"div\",\n            {\n              staticClass:\n                \"flex items-center justify-center text-center rounded animate__animated animate__backInDown\"\n            },\n            [\n              _vm.toShow === \"initRoom\"\n                ? _c(\"div\", { staticClass: \"flex w-full\" }, [\n                    _c(\n                      \"div\",\n                      {\n                        staticClass:\n                          \"col-create-room flex flex-1 justify-center items-center flex-col\"\n                      },\n                      [\n                        _c(\"p\", { staticClass: \"text-gray-700 mb-2\" }, [\n                          _vm._v(\"Create a room\")\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\n                          \"button\",\n                          {\n                            staticClass:\n                              \"bg-pink-700 px-4 py-2 text-white rounded\",\n                            on: {\n                              click: function($event) {\n                                return _vm.createRoom()\n                              }\n                            }\n                          },\n                          [_vm._v(\"Create\")]\n                        )\n                      ]\n                    ),\n                    _vm._v(\" \"),\n                    _c(\n                      \"div\",\n                      {\n                        staticClass:\n                          \"col-go-to-room flex flex-1 justify-center items-center flex-col\"\n                      },\n                      [\n                        _c(\"p\", { staticClass: \"text-gray-700 mb-2\" }, [\n                          _vm._v(\"Go to a room\")\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\n                          \"ul\",\n                          _vm._l(_vm.codes, function(code, i) {\n                            return _c(\n                              \"li\",\n                              { key: i, staticClass: \"flex flex-col mx-1\" },\n                              [\n                                _c(\"i\", {\n                                  staticClass: \"fa fa-plus\",\n                                  attrs: { \"aria-hidden\": \"true\" },\n                                  on: {\n                                    click: function($event) {\n                                      return _vm.increaseNum(i)\n                                    }\n                                  }\n                                }),\n                                _vm._v(\" \"),\n                                _c(\"span\", { staticClass: \"bg-gray-800\" }, [\n                                  _vm._v(_vm._s(_vm.codes[i].val))\n                                ]),\n                                _vm._v(\" \"),\n                                _c(\"i\", {\n                                  staticClass: \"fa fa-minus\",\n                                  attrs: { \"aria-hidden\": \"true\" },\n                                  on: {\n                                    click: function($event) {\n                                      return _vm.decreaseNum(i)\n                                    }\n                                  }\n                                })\n                              ]\n                            )\n                          }),\n                          0\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"button\",\n                          {\n                            staticClass:\n                              \"bg-blue-700 mt-1 px-4 py-2 text-white rounded\",\n                            on: {\n                              click: function($event) {\n                                return _vm.goToRoom()\n                              }\n                            }\n                          },\n                          [_vm._v(\"Go play\")]\n                        ),\n                        _vm._v(\" \"),\n                        _vm.roomError\n                          ? _c(\n                              \"div\",\n                              { staticClass: \"room-error text-center mt-2\" },\n                              [\n                                _c(\"p\", { staticClass: \"text-red-600\" }, [\n                                  _vm._v(\"Invalid room code..\")\n                                ]),\n                                _vm._v(\" \"),\n                                _c(\n                                  \"p\",\n                                  { staticClass: \"text-red-600 text-xs\" },\n                                  [_vm._v(\"Try again with another code.\")]\n                                )\n                              ]\n                            )\n                          : _vm._e()\n                      ]\n                    )\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.toShow === \"roomCode\"\n                ? _c(\"div\", [\n                    _c(\"p\", { staticClass: \"text-gray-700\" }, [\n                      _vm._v(\"Your opponent can connect to this room code:\")\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\n                      \"ul\",\n                      {\n                        staticClass: \"room-generated flex justify-center my-3\"\n                      },\n                      _vm._l(_vm.roomCode.split(\"\"), function(num) {\n                        return _c(\"li\", { staticClass: \"mx-1\" }, [\n                          _c(\"span\", { staticClass: \"bg-gray-800\" }, [\n                            _vm._v(_vm._s(num))\n                          ])\n                        ])\n                      }),\n                      0\n                    ),\n                    _vm._v(\" \"),\n                    _c(\"small\", { staticClass: \"text-green-600 mt-2\" }, [\n                      _vm._v(\"Waiting for opponent to connect...\")\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\n                      \"button\",\n                      {\n                        staticClass:\n                          \"go-back bg-blue-700 block mx-auto mt-4 px-4 py-2 text-white rounded\",\n                        on: {\n                          click: function($event) {\n                            return _vm.goBack()\n                          }\n                        }\n                      },\n                      [_vm._v(\"Go back\")]\n                    )\n                  ])\n                : _vm._e()\n            ]\n          )\n        ]\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import Players from './components/Players';\nimport Turn from './components/Turn';\n\nclass GameData {\n    constructor() {\n        let imageNum = this.getId() == 1 ? 1 : 2;\n        //console.log(imageNum);\n        this.players = {\n            player: {\n                id: this.getId(),\n                name: 'User' + (this.getParameterByName('userId') ?? '1'),\n                photo: `assets/images/profile-${imageNum}.jpg`,\n            },\n        };\n\n        this.turn = new Turn();\n    }\n\n    // Called from Socket class\n    setOpponent(opponent) {\n        this.players.opponent = opponent;\n\n        const setPlaneScene = game.scene.getScene('SetPlaneScene');\n        setPlaneScene.playersComponent = new Players(setPlaneScene);\n    }\n\n    // helper for debugging\n    getId() {\n        return this.getParameterByName('userId') ?? 1;\n    }\n    getParameterByName(name, url = window.location.href) {\n        name = name.replace(/[\\[\\]]/g, '\\\\$&');\n        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),\n            results = regex.exec(url);\n        if (!results) return null;\n        if (!results[2]) return '';\n        return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n    }\n}\n\nexport default GameData;\n","class Socket {\n    constructor() {\n        this.scene = game.scene.getScene('MainScene');\n        const queryString = $.param(game.gameData.players.player);\n        const url = `ws://192.168.0.105:8080/comm?${queryString}`;\n        const conn = new WebSocket(url);\n\n        conn.onopen = (e) => {\n            console.log(`Connection established to ${url}`);\n        };\n        this.conn = conn;\n        conn.onmessage = (e) => {\n            // console.log(e.data);\n            const msg = JSON.parse(e.data);\n            this.handleReceivedMessage(msg);\n        };\n\n        conn.onerror = () => {\n            Swal.fire({\n                title: 'Ouups!',\n                text:\n                    \"We can't connect to the server now. Please try again later.\",\n                icon: 'error',\n                showConfirmButton: false,\n            });\n        };\n    }\n\n    handleReceivedMessage(msg) {\n        if (!msg.action) return;\n        console.log(msg);\n\n        switch (msg.action) {\n            case 'setMyRoom':\n                //game.scene.getScene('SetOpponentScene').showMyRoomId(msg.room);\n                game.bus.$emit('ShowMyRoomId', msg.room);\n                game.gameData.turn.setIsMyTurn(true);\n                break;\n            case 'invalidRoom':\n                //game.scene.getScene('SetOpponentScene').printInvalidRoom();\n                game.bus.$emit('PrintInvalidRoom');\n                break;\n            case 'enterToRoom':\n                game.gameData.setOpponent(msg.opponent);\n                //game.scene.getScene('SetOpponentScene').startRoom(msg.room);\n                game.bus.$emit('StartRoom', msg.room);\n                break;\n            case 'opponentDisconnected':\n                this.doOpponentDisconnected(msg);\n                break;\n            case 'attack':\n                this.doAttack(msg);\n                game.gameData.turn.reverse();\n                break;\n            case 'setOpponentData':\n                this.doSetOpponentData(msg);\n                break;\n        }\n    }\n\n    doSetOpponentData(msg) {\n        this.scene.opponentData = msg.opponentData;\n    }\n\n    doAttack(msg) {\n        const cellId = msg.cellClicked;\n        if (!cellId) return;\n\n        const cellNum = cellId.replace('p', '');\n        const rect = this.scene.cells[cellId.replace('p', 'o')].rect;\n\n        if (this.scene.myPlanesCells.includes(cellNum)) {\n            // Targeted point\n            const texture =\n                this.scene.myPlanesCells[0] == cellNum ||\n                this.scene.myPlanesCells[10] == cellNum\n                    ? 'fire-cap'\n                    : 'fire';\n            this.scene.add\n                .image(rect.centerX, rect.centerY, texture)\n                .setScale(0.8);\n        } else {\n            // Missed point\n            this.scene.add.image(rect.centerX, rect.centerY, 'x').setScale(0.8);\n        }\n\n        // const graphics = this.scene.add.graphics({\n        //     fillStyle: { color },\n        // });\n\n        // graphics.fillRectShape(this.scene.cells[cellId.replace('p', 'o')].rect);\n    }\n\n    doOpponentDisconnected(msg) {\n        console.log('opponent disconnected');\n        this.scene.scene.start('SetPlaneScene');\n    }\n    // Used external\n    send(msg) {\n        if (this.conn.readyState === WebSocket.CLOSED) return;\n        return this.conn.send(JSON.stringify(msg));\n    }\n}\n\nexport default Socket;\n","class Background {\n    constructor(scene) {\n        this.scene = scene;\n        this.draw();\n    }\n\n    draw() {\n        const x = 0;\n        const y = 0;\n        const squareWidth = game.opts.cellSize;\n        const cellsNum = 26;\n\n        for (let i = 0; i < cellsNum; i++) {\n            // Go vertical\n            for (let j = 0; j < cellsNum; j++) {\n                // Go horizontal\n                this.drawSingleRect(\n                    x + j * squareWidth,\n                    y + i * squareWidth,\n                    squareWidth,\n                    i,\n                    j\n                );\n            }\n        }\n    }\n\n    drawSingleRect(x, y, squareWidth, i, j) {\n        const rect = new Phaser.Geom.Rectangle(x, y, squareWidth, squareWidth);\n        const graphics = this.scene.add.graphics({\n            lineStyle: { width: 1 * game.zoom, color: 0xeeeeee },\n        });\n        graphics.strokeRectShape(rect);\n    }\n}\n\nexport default Background;\n","class Map {\n    constructor(scene, x, y, type = null, isMainScene = false) {\n        this.type = type;\n        this.scene = scene;\n        this.x = x * game.zoom;\n        this.y = y * game.zoom;\n        this.isMainScene = isMainScene;\n\n        this.drawMap();\n    }\n\n    drawMap() {\n        const squareWidth = game.opts.cellSize;\n        const cellsNum = 10;\n\n        for (let i = 0; i < cellsNum; i++) {\n            // Go vertical\n            for (let j = 0; j < cellsNum; j++) {\n                // Go horizontal\n                this.drawRect(\n                    this.x + j * squareWidth,\n                    this.y + i * squareWidth,\n                    squareWidth,\n                    i,\n                    j\n                );\n            }\n        }\n\n        this.drawBorder(this.x, this.y, squareWidth, cellsNum);\n\n        // Draw coordinates\n        const letters = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'];\n        for (let i = 0; i < letters.length; i++) {\n            // Draw letters\n            const letter = letters[i].toUpperCase();\n            this.drawText(\n                letter,\n                this.x - game.opts.cellSize / 2,\n                this.y + game.opts.cellSize / 2 + game.opts.cellSize * i\n            );\n\n            // Draw numbers\n            this.drawText(\n                i + 1,\n                this.x + game.opts.cellSize / 2 + game.opts.cellSize * i,\n                this.y - game.opts.cellSize / 2\n            );\n        }\n    }\n\n    drawBorder(x, y, squareWidth, cellsNum) {\n        const width = squareWidth * cellsNum;\n        const rect = new Phaser.Geom.Rectangle(x, y, width, width);\n        const graphics = this.scene.add.graphics({\n            lineStyle: { width: 3 * game.zoom, color: 0x424242 },\n        });\n        graphics.strokeRectShape(rect);\n\n        this.scene.dropZoneRect = rect;\n    }\n\n    drawRect(x, y, squareWidth, i, j) {\n        const rect = new Phaser.Geom.Rectangle(x, y, squareWidth, squareWidth);\n        //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n        const graphics = this.scene.add.graphics({\n            lineStyle: { width: 1 * game.zoom, color: 0x424242 },\n        });\n        graphics.strokeRectShape(rect);\n\n        if (this.isMainScene) {\n            // Rect in MainScene\n            graphics.setInteractive(\n                new Phaser.Geom.Rectangle(x, y, squareWidth, squareWidth),\n                Phaser.Geom.Rectangle.Contains\n            );\n\n            const owner = this.type === 'opponent' ? 'p' : 'o';\n\n            const id = `${owner}${j + 1}${i + 1}`;\n            this.scene.cells[id] = { graphics, rect };\n\n            graphics.on('pointerdown', () => {\n                if (this.type !== 'opponent') return;\n\n                if ($.isEmptyObject(this.scene.opponentData)) {\n                    console.log('opponent not ready yet');\n                    return;\n                }\n\n                if (!this.scene.turn.isMyTurn) {\n                    //console.log('not my turn');\n                    game.gameData.turn.scaleText();\n                    return;\n                }\n\n                this.scene.socket.send({\n                    action: 'attack',\n                    cellClicked: id,\n                });\n\n                const cellNum = `${j + 1}${i + 1}`;\n                if (this.scene.opponentData.planesCells.includes(cellNum)) {\n                    // Targeted point\n                    let gph = this.scene.add.graphics({\n                        fillStyle: { color: 0x800000 },\n                    });\n                    gph.fillRectShape(rect);\n\n                    const texture =\n                        this.scene.opponentData.planesCells[0] == cellNum ||\n                        this.scene.opponentData.planesCells[10] == cellNum\n                            ? 'fire-cap'\n                            : 'fire';\n\n                    this.scene.add\n                        .image(rect.centerX, rect.centerY, texture)\n                        .setScale(0.6);\n                } else {\n                    // Missed point\n                    this.scene.add\n                        .image(rect.centerX, rect.centerY, 'x')\n                        .setScale(0.6);\n                }\n\n                game.gameData.turn.reverse();\n            });\n        } else {\n            // Rect in SetPlaneScene\n            const id = `${j + 1}${i + 1}`;\n            this.scene.cells[id] = { id, rect };\n        }\n    }\n\n    drawText(text, x, y) {\n        const fontSize = 16 * game.zoom;\n        this.scene.add\n            .text(x, y, text, {\n                color: '#424242',\n                fontFamily: 'Righteous',\n                // stroke: '#000',\n                // strokeThickness: 1,\n                fontSize: `${fontSize}px`,\n            })\n            .setOrigin(0.5)\n            .setDepth(4);\n    }\n}\n\nexport default Map;\n","class Plane extends Phaser.GameObjects.Sprite {\n    constructor(config) {\n        super(\n            config.scene,\n            config.x * game.zoom,\n            config.y * game.zoom,\n            `plane-${config.planeNum}`\n        );\n\n        config.scene.add.existing(this);\n\n        this.scene = config.scene;\n\n        this.setScale(0.4)\n            .setInteractive()\n            .setData('initialPos', {\n                x: this.x,\n                y: this.y,\n            });\n\n        this.setInteractive();\n        this.scene.input.setDraggable(this);\n        this.scene.input.on('dragstart', this.dragStart, this);\n        this.scene.input.on('dragend', this.dragEnd, this);\n        this.scene.input.on('drag', this.drag, this);\n\n        // Other variables\n        //this.dragObj = null;\n        this.planeName = `plane${config.planeNum}`;\n        this.stablePos = [\n            {\n                x: this.x,\n                y: this.y,\n            },\n        ];\n        this.planeCells = [];\n        this.isInDropZone = false;\n        this.firstClickTime = 0;\n    }\n\n    /**\n     *  Drag & drop logic\n     */\n\n    dragStart(pointer, gameObject) {\n        if (gameObject !== this) return;\n        this.moveToFront();\n        // console.log('start  drag');\n    }\n\n    drag(pointer, gameObject, dragX, dragY) {\n        if (gameObject !== this) return;\n        //console.log('drag');\n        gameObject.x = dragX;\n        gameObject.y = dragY;\n\n        this.scaleOnDrag(pointer);\n    }\n\n    dragEnd(pointer, gameObject) {\n        if (gameObject !== this) return;\n        // console.log('end drag');\n        this.checkDoubleTap(pointer);\n        this.checkIfInDropZone();\n    }\n\n    /**\n     * Visual actions\n     */\n    checkIfInDropZone() {\n        const dropZone = this.getDropZone();\n\n        if (\n            this.x > dropZone.x &&\n            this.x < dropZone.x + dropZone.width &&\n            this.y > dropZone.y &&\n            this.y < dropZone.y + dropZone.height\n        ) {\n            // Inside drop zone\n            this.setScale(1);\n\n            this.repositionToClosest('x');\n            this.repositionToClosest('y');\n\n            this.setPlaneCells();\n\n            this.isInDropZone = true;\n        } else {\n            // Outside drop zone / Go back to initial position\n            this.goToInitialPosition();\n            this.isInDropZone = false;\n        }\n    }\n\n    repositionToClosest(axis) {\n        let isVertical = this.angle === 90 || this.angle === -90;\n\n        if (isVertical) {\n            this.repositionVertical(axis);\n        } else {\n            this.repositionHorizontal(axis);\n        }\n\n        // console.log(isVertical);\n    }\n\n    repositionHorizontal(axis) {\n        let dropZone = this.getDropZone();\n\n        for (let i = 0; i < 10; i++) {\n            if (i < 2) continue;\n\n            let closest = i * game.opts.cellSize;\n            let relativeDistance = this[axis] - dropZone[axis];\n\n            if (axis === 'y') {\n                relativeDistance = relativeDistance + game.opts.cellSize / 2;\n            }\n\n            if (relativeDistance - closest < game.opts.cellSize - 1) {\n                // Horizontal plane\n                let newPos =\n                    closest +\n                    dropZone[axis] +\n                    (axis === 'x' ? game.opts.cellSize / 2 : 0);\n\n                if (i > 7) {\n                    // this.dragObj[axis] =\n                    //     5 * 40 + dropZone[axis] + (axis === 'x' ? 20 : 0);\n                    if (axis === 'x') {\n                        this.x =\n                            7 * game.opts.cellSize +\n                            dropZone.x +\n                            game.opts.cellSize / 2;\n                    } else {\n                        this.y = 8 * game.opts.cellSize + dropZone.y;\n                    }\n                } else {\n                    this[axis] = newPos;\n                }\n\n                break;\n            }\n        }\n    }\n\n    repositionVertical(axis) {\n        let dropZone = this.getDropZone();\n\n        for (let i = 0; i < 11; i++) {\n            if (i < 2) continue;\n\n            let closest = i * game.opts.cellSize;\n            let relativeDistance = this[axis] - dropZone[axis];\n\n            if (axis === 'x') {\n                relativeDistance = relativeDistance + game.opts.cellSize / 2;\n            }\n\n            if (relativeDistance - closest < game.opts.cellSize - 1) {\n                // Horizontal plane\n                let newPos =\n                    closest +\n                    dropZone[axis] +\n                    (axis === 'y' ? game.opts.cellSize / 2 : 0);\n\n                if (i > 7) {\n                    // this.dragObj[axis] =\n                    //     5 * 40 + dropZone[axis] + (axis === 'x' ? 20 : 0);\n                    if (axis === 'x') {\n                        this.x = 8 * game.opts.cellSize + dropZone.x;\n                        //console.log('aici 1');\n                    } else {\n                        this.y =\n                            8 * game.opts.cellSize +\n                            dropZone.x -\n                            game.opts.cellSize / 2;\n                        ///console.log('aici 2');\n                    }\n                } else {\n                    this[axis] = newPos;\n                }\n\n                break;\n            }\n        }\n    }\n\n    goToInitialPosition() {\n        this.scene.tweens.add({\n            targets: [this],\n            x: this.getData('initialPos').x,\n            y: this.getData('initialPos').y,\n            scaleX: game.zoom * 0.4,\n            scaleY: game.zoom * 0.4,\n            duration: 500,\n        });\n\n        // console.log(this.scene.planes);\n        delete this.scene.planes[this.planeName];\n        // console.log(this.scene.planes);\n    }\n\n    scaleOnDrag(pointer) {\n        if (pointer.x < this.getData('initialPos').x) {\n            if (this.isInDropZone) {\n                this.setScale(1.1);\n            } else {\n                this.setScaleNoZoom((game.config.width - this.x) / 450);\n            }\n        }\n    }\n\n    moveToFront() {\n        const objects = this.scene.planesGameObjects;\n        objects.forEach((planeGameObject) => {\n            if (this === planeGameObject) {\n                objects.splice(objects.indexOf(this), 1);\n                objects.push(this);\n            }\n        });\n        objects.forEach((planeGameObject) => {\n            planeGameObject.setDepth(objects.indexOf(planeGameObject));\n        });\n    }\n\n    /**\n     *  Calculations and settings\n     */\n    setPlaneCells() {\n        let headCellId;\n        let planeData = this.getPlanePositionData();\n        let headPoint = planeData.headPoint;\n\n        //console.log(planeData);\n\n        this.scene.cells.forEach((cell) => {\n            if (\n                cell.rect.centerX === headPoint.x &&\n                cell.rect.centerY === headPoint.y\n            ) {\n                headCellId = cell.id;\n            }\n        });\n\n        if (!headCellId) {\n            this.goToInitialPosition();\n            return;\n        }\n\n        let headCords = headCellId.split('').map((num) => parseInt(num));\n        headCords = { x: headCords[0], y: headCords[1] };\n\n        let planeCells = [];\n\n        let schema = planeData.schema;\n\n        let originX = headCords.x + planeData.diff.x;\n        let originY = headCords.y + planeData.diff.y;\n\n        for (let i = 0; i < schema.length; i++) {\n            const line = schema[i];\n            //console.log('line', i);\n\n            for (let j = 0; j < line.length; j++) {\n                const cellPlaceholder = line[j];\n\n                if (cellPlaceholder) {\n                    planeCells.push(`${originX + j}${originY + i}`);\n                }\n\n                //console.log(`${i + 1}${j + 1}`);\n            }\n        }\n\n        // console.log(planeCells);\n        this.planeCells = planeCells;\n\n        // Push current plane to planes object\n        const currPlaneExists = Object.keys(this.scene.planes).includes(\n            this.planeName\n        );\n\n        if (!currPlaneExists) {\n            this.scene.planes[this.planeName] = {\n                cells: planeCells,\n                instance: this,\n            };\n        } else {\n            this.scene.planes[this.planeName].cells = planeCells;\n        }\n\n        // Check for overlap\n        let isOverlapping = this.checkOverlap();\n        //console.log(isOverlapping, this.planeName);\n        if (!isOverlapping) {\n            this.stablePos.push({\n                x: this.x,\n                y: this.y,\n            });\n\n            if (this.stablePos.length > 1) {\n                this.stablePos.shift();\n            }\n        }\n\n        //localStorage.setItem('lastPlaceCells', planeCells.join(','));\n    }\n\n    checkOverlap() {\n        let keys = Object.keys(this.scene.planes);\n        if (keys.length < 2) return false;\n\n        let otherPlaneCells;\n\n        keys.forEach((planeKey) => {\n            if (planeKey !== this.planeName) {\n                otherPlaneCells = this.scene.planes[planeKey].cells;\n            }\n        });\n\n        let overlap = false;\n\n        for (let i = 0; i < this.planeCells.length; i++) {\n            if (otherPlaneCells.includes(this.planeCells[i])) {\n                //console.log('overlap');\n\n                // Reposition plane back to last stable positio\n                if (\n                    this.stablePos[0].x === this.getData('initialPos').x &&\n                    this.stablePos[0].y === this.getData('initialPos').y\n                ) {\n                    this.goToInitialPosition();\n\n                    //console.log('overl init');\n                } else {\n                    this.x = this.stablePos[0].x;\n                    this.y = this.stablePos[0].y;\n                    // console.log('overl afetr');\n                }\n\n                // console.log(this.planeCells[i]);\n\n                overlap = true;\n                break;\n            }\n        }\n\n        return overlap;\n    }\n\n    getDropZone() {\n        let { x, y, width, height } = this.scene.dropZoneRect;\n        return { x, y, width, height };\n    }\n\n    getPlanePositionData() {\n        let schema;\n        let headPoint;\n        let diff; // Compute start point difference\n        // It is distance in cells from plane head\n        // to plane margin (top/left 0)\n\n        switch (this.angle) {\n            case 90:\n                headPoint = {\n                    x:\n                        this.x +\n                        (this.height * game.zoom) / 2 -\n                        game.opts.cellSize / 2,\n                    y: this.y,\n                };\n                schema = [\n                    [0, 0, 1, 0],\n                    [1, 0, 1, 0],\n                    [1, 1, 1, 1],\n                    [1, 0, 1, 0],\n                    [0, 0, 1, 0],\n                ];\n                diff = {\n                    x: -3,\n                    y: -2,\n                };\n                break;\n            case -180:\n                headPoint = {\n                    x: this.x,\n                    y:\n                        this.y +\n                        (this.height * game.zoom) / 2 -\n                        game.opts.cellSize / 2,\n                };\n                schema = [\n                    [0, 1, 1, 1, 0],\n                    [0, 0, 1, 0, 0],\n                    [1, 1, 1, 1, 1],\n                    [0, 0, 1, 0, 0],\n                ];\n                diff = {\n                    x: -2,\n                    y: -3,\n                };\n                break;\n            case -90:\n                headPoint = {\n                    x:\n                        this.x -\n                        (this.height * game.zoom) / 2 +\n                        game.opts.cellSize / 2,\n                    y: this.y,\n                };\n                schema = [\n                    [0, 1, 0, 0],\n                    [0, 1, 0, 1],\n                    [1, 1, 1, 1],\n                    [0, 1, 0, 1],\n                    [0, 1, 0, 0],\n                ];\n                diff = {\n                    x: 0,\n                    y: -2,\n                };\n                break;\n\n            default:\n                headPoint = {\n                    x: this.x,\n                    y:\n                        this.y -\n                        (this.height * game.zoom) / 2 +\n                        game.opts.cellSize / 2,\n                };\n                schema = [\n                    [0, 0, 1, 0, 0],\n                    [1, 1, 1, 1, 1],\n                    [0, 0, 1, 0, 0],\n                    [0, 1, 1, 1, 0],\n                ];\n                diff = {\n                    x: -2,\n                    y: 0,\n                };\n        }\n\n        return { schema, headPoint, diff };\n    }\n\n    /**\n     * Double tap check\n     */\n    checkDoubleTap() {\n        if (!this.lastClickTime) {\n            this.lastClickTime = this.scene.time.now;\n            return;\n        }\n        const clickDelay = this.scene.time.now - this.lastClickTime;\n        this.lastClickTime = this.scene.time.now;\n        if (clickDelay < 350) {\n            this.angle += 90;\n            // this.repositionToClosest('x');\n            // this.repositionToClosest('y');\n        }\n    }\n\n    /**\n     * Override inherited methods\n     */\n    setScale(scale) {\n        super.setScale(scale * game.zoom);\n        return this;\n    }\n\n    setScaleNoZoom(scale) {\n        super.setScale(scale);\n        return this;\n    }\n}\n\nexport default Plane;\n","class Players {\n    constructor(scene) {\n        this.scene = scene;\n        this.player = game.gameData.players.player;\n        this.opponent = game.gameData.players.opponent;\n\n        this.printBackground();\n        this.printPlayer();\n        this.loadOpponent();\n    }\n\n    printBackground() {\n        const rect = new Phaser.Geom.Rectangle(\n            0,\n            0,\n            game.config.width,\n            66 * game.zoom\n        );\n        const graphics = this.scene.add.graphics();\n        graphics.fillStyle(0x000000, 0.6);\n        graphics.fillRectShape(rect);\n    }\n\n    loadOpponent() {\n        if (this.scene.textures.exists(`opponent-${this.opponent.id}`)) {\n            this.printOpponent();\n            return;\n        }\n\n        this.scene.load.image(\n            `opponent-${this.opponent.id}`,\n            this.opponent.photo\n        );\n        this.scene.load.on('complete', this.printOpponent, this);\n        this.scene.load.start();\n    }\n\n    printPlayer() {\n        this.printPlayerPhoto('player', 30, 10);\n        this.printPlayerName(this.player.name, 90, 50, 0);\n    }\n\n    printOpponent() {\n        this.printPlayerPhoto(\n            `opponent-${this.opponent.id}`,\n            game.opts.defaultWidth - 80,\n            10\n        );\n        this.printPlayerName(\n            this.opponent.name,\n            game.opts.defaultWidth - 90,\n            50\n        );\n    }\n\n    printPlayerPhoto(key, x, y) {\n        const width = 50 * game.zoom;\n        const height = width;\n\n        x = x * game.zoom;\n        y = y * game.zoom;\n\n        // Create mask\n        const shape = this.scene.add.graphics();\n        shape.fillStyle(0x000000, 1);\n        shape.fillRoundedRect(x, y, width, height, 6);\n        const mask = shape.createGeometryMask();\n\n        // Add player image\n        const img = this.scene.add\n            .image(x, y, key)\n            .setDepth(4)\n            .setMask(mask)\n            .setOrigin(0);\n\n        img.displayWidth = width;\n        img.displayHeight = height;\n    }\n\n    printPlayerName(name, x, y, originX = 1) {\n        const fontSize = 20 * game.zoom;\n        this.scene.add\n            .text(x * game.zoom, y * game.zoom, name, {\n                color: '#fff',\n                fontFamily: 'Righteous',\n                stroke: 'rgba(0,0,0,.6)',\n                strokeThickness: 1,\n                fontSize: `${fontSize}px`,\n            })\n            .setOrigin(originX, 0.5)\n            .setDepth(4);\n    }\n}\n\nexport default Players;\n","class Turn {\n    constructor() {\n        this.text = null;\n        this.isMyTurn = false; // used in Mainscene to allow/disallow clicking on cells\n    }\n\n    setScene(scene) {\n        this.scene = scene;\n        this.printTurnText();\n        this.updateTurnText();\n    }\n\n    setIsMyTurn(bool) {\n        this.isMyTurn = bool;\n    }\n\n    reverse() {\n        this.isMyTurn = !this.isMyTurn;\n        this.updateTurnText();\n    }\n\n    getTurnText() {\n        return this.isMyTurn ? 'Your turn' : 'Opponent turn. Please wait..';\n    }\n\n    printTurnText() {\n        const fontSize = 16 * game.zoom;\n        this.text = this.scene.add\n            .text(game.config.width / 2, 36 * game.zoom, this.getTurnText(), {\n                color: '#fff',\n                fontFamily: 'Righteous',\n                stroke: 'rgba(0,0,0,.6)',\n                strokeThickness: 1,\n                fontSize: `${fontSize}px`,\n            })\n            .setOrigin(0.5)\n            .setDepth(4);\n    }\n\n    updateTurnText() {\n        setTimeout(() => {\n            const color = this.isMyTurn ? '#0a9c00' : '#f79e0f';\n            this.text.setText(this.getTurnText()).setColor(color);\n\n            const tween = this.scene.tweens.add({\n                targets: [this.text],\n                scaleX: 1.5,\n                scaleY: 1.5,\n                duration: 400,\n                yoyo: true,\n                onComplete: () => {\n                    this.text.setColor('#fff').setScale(1);\n                },\n            });\n        }, 400);\n    }\n\n    scaleText() {\n        this.text.setText(this.getTurnText()).setColor('#ff0000');\n        const tween = this.scene.tweens.add({\n            targets: [this.text],\n            scaleX: 1.5,\n            scaleY: 1.5,\n            duration: 400,\n            yoyo: true,\n            onComplete: () => {\n                this.text.setColor('#fff').setScale(1);\n            },\n        });\n    }\n}\n\nexport default Turn;\n","import Vue from 'vue';\nimport Phaser from 'phaser';\nimport Swal from 'sweetalert2';\nimport Helpers from './helpers';\n\nwindow.Swal = Swal;\nwindow.jQuery = window.$ = require('jquery');\n// window.axios = require('axios');\n// window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n\nimport LoadScene from './scenes/LoadScene';\nimport MainScene from './scenes/MainScene';\nimport StartScene from './scenes/StartScene';\nimport SetPlaneScene from './scenes/SetPlaneScene';\n//import SetOpponentScene from './scenes/SetOpponentScene';\n\nimport SetOpponent from './vue-components/SetOpponent.vue';\n\nconst zoom = Helpers.getDevicePixelRatio();\n\nconst config = {\n    type: Phaser.AUTO,\n    width: 800 * zoom,\n    height: 458 * zoom,\n    parent: 'game',\n    title: 'The Airplanes with Friends',\n    version: '0.1.0',\n    url: '',\n};\n\nconst game = new Phaser.Game(config);\n\ngame.zoom = zoom;\ngame.opts = {\n    cellSize: 32 * zoom,\n    defaultWidth: 800,\n    defaultHeight: 458,\n};\ngame.bus = new Vue();\n\ngame.scene.add('LoadScene', new LoadScene());\ngame.scene.add('MainScene', new MainScene());\ngame.scene.add('StartScene', new StartScene());\ngame.scene.add('SetPlaneScene', new SetPlaneScene());\n//game.scene.add('SetOpponentScene', new SetOpponentScene());\ngame.scene.start('LoadScene');\n\nwindow.game = game;\n\nnew Vue({\n    render: (h) => h(SetOpponent),\n}).$mount('#game div');\n","export default {\n    getDevicePixelRatio() {\n        let mediaQuery;\n        let is_firefox =\n            navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n        if (window.devicePixelRatio !== undefined && !is_firefox) {\n            return window.devicePixelRatio;\n        } else if (window.matchMedia) {\n            mediaQuery =\n                '(-webkit-min-device-pixel-ratio: 1.5),\\\n              (min--moz-device-pixel-ratio: 1.5),\\\n              (-o-min-device-pixel-ratio: 3/2),\\\n              (min-resolution: 1.5dppx)';\n            if (window.matchMedia(mediaQuery).matches) {\n                return 1.5;\n            }\n            mediaQuery =\n                '(-webkit-min-device-pixel-ratio: 2),\\\n              (min--moz-device-pixel-ratio: 2),\\\n              (-o-min-device-pixel-ratio: 2/1),\\\n              (min-resolution: 2dppx)';\n            if (window.matchMedia(mediaQuery).matches) {\n                return 2;\n            }\n            mediaQuery =\n                '(-webkit-min-device-pixel-ratio: 0.75),\\\n              (min--moz-device-pixel-ratio: 0.75),\\\n              (-o-min-device-pixel-ratio: 3/4),\\\n              (min-resolution: 0.75dppx)';\n            if (window.matchMedia(mediaQuery).matches) {\n                return 0.7;\n            }\n        } else {\n            return 1;\n        }\n    },\n};\n","import GameData from '../GameData';\n\nclass LoadScene extends Phaser.Scene {\n    constructor() {\n        super({\n            key: 'LoadScene',\n        });\n    }\n\n    init() {\n        game.gameData = new GameData();\n    }\n\n    preload() {\n        /**\n         * LoadScene images\n         */\n\n        // this.load.multiatlas(\n        //     'atlas',\n        //     'assets/sprites/tp/atlas.json',\n        //     'assets/sprites/tp'\n        // );\n\n        this.load.image('player', game.gameData.players.player.photo);\n\n        this.load.image('play-btn', 'assets/images/play-btn.png');\n        this.load.image('btn-start-game', 'assets/images/btn-start-game.png');\n\n        this.load.image('x', 'assets/images/x.png');\n        this.load.image('fire', 'assets/images/fire.png');\n        this.load.image('fire-cap', 'assets/images/fire-cap.png');\n\n        this.load.image('plane-1', 'assets/images/planes/plane-1.png');\n        this.load.image('plane-2', 'assets/images/planes/plane-2.png');\n\n        this.showPreloader();\n    }\n\n    showPreloader() {\n        let scene = this;\n\n        let fontStyle = {\n            fontFamily: 'Play',\n            fontSize: 28,\n            color: '#ffffff',\n            stroke: '#fff',\n            strokeThickness: 2,\n            shadow: {\n                offsetX: 1,\n                offsetY: 1,\n                color: '#000',\n                blur: 0,\n                stroke: true,\n                fill: true,\n            },\n        };\n\n        let progressBar = scene.add.graphics();\n        let progressBox = scene.add.graphics();\n        progressBox.fillStyle(0x222222, 0.05);\n        progressBox.fillRect(\n            (game.config.width - 250) / 2,\n            game.config.height / 2 + 40,\n            250,\n            50\n        );\n\n        let width = scene.cameras.main.width;\n        let height = scene.cameras.main.height;\n        let loadingText = scene.make.text({\n            x: width / 2,\n            y: height / 2 - 50,\n            text: 'Loading...',\n            style: fontStyle,\n        });\n        loadingText.setOrigin(0.5, 0.5);\n\n        let percentText = scene.make.text({\n            x: width / 2,\n            y: height / 2 - 5,\n            text: '0%',\n            style: fontStyle,\n        });\n        percentText.setOrigin(0.5, 0.5);\n\n        scene.load.on('progress', function(value) {\n            percentText.setText(parseInt(value * 100) + '%');\n            progressBar.clear();\n            progressBar.fillStyle(0xbf4689, 1);\n            progressBar.fillRect(\n                (game.config.width - 250) / 2 + 5,\n                game.config.height / 2 + 50,\n                240 * value,\n                30\n            );\n        });\n\n        scene.load.on('complete', function() {\n            // console.log('preload done')\n\n            progressBar.destroy();\n            progressBox.destroy();\n            loadingText.destroy();\n            percentText.destroy();\n\n            //game.scene.start('Start');\n\n            game.scene.start('SetPlaneScene');\n        });\n    }\n}\n\nexport default LoadScene;\n","// import Socket from '../Socket';\nimport Map from '../components/Map';\nimport Players from '../components/Players';\nimport Background from '../components/Background';\n\nclass MainScene extends Phaser.Scene {\n    constructor() {\n        super({\n            key: 'MainScene',\n        });\n\n        this.cells = {};\n        this.opponentData = {}; // it is set on Socket class when msg is received from opponent\n    }\n\n    init(data) {\n        this.myPlanesCells = data.planesData.cells;\n        this.myPlanes = data.planesData.planes;\n        //console.log(this.myPlanesCells);\n        // console.log('heads', this.myPlanesCells[0], this.myPlanesCells[10]);\n        this.cameras.main.setBackgroundColor('#fff');\n    }\n\n    //debug\n    // drawByCells(cells) {\n    //     //console.log(this.cells);\n\n    //     cells.forEach((cl) => {\n    //         //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n    //         var graphics = this.add.graphics({\n    //             lineStyle: { width: 3, color: 0x000000 },\n    //         });\n    //         graphics.strokeRectShape(this.cells[`o${cl}`].rect);\n    //     });\n    // }\n\n    create() {\n        // console.log('main create');\n\n        const background = new Background(this);\n\n        this.playersComponent = new Players(this);\n        //this.game.scene.getScene('SetPlaneScene').players.opponent\n\n        this.socket.send({\n            action: 'setOpponentData',\n            opponentData: {\n                planesCells: this.myPlanesCells,\n            },\n        });\n\n        // this.drawPlayerMap(40, 80);\n        // this.drawPlayerMap(440, 80, 'opponent');\n        const playerMap = new Map(this, 96 - 32, 98, null, true);\n        const opponentMap = new Map(this, 96 + 32 * 11, 98, 'opponent', true);\n\n        this.drawPlanes();\n\n        this.turn = game.gameData.turn;\n        this.turn.setScene(this);\n\n        //console.log(this.turn);\n\n        //debug\n        //window.Socket = Socket;\n        window.MainScene = this;\n        // this.drawByCells(this.myPlanesCells);\n    }\n\n    drawPlanes() {\n        // console.log(this.myPlanes);\n        Object.keys(this.myPlanes).forEach((planeKey) => {\n            const playerMapLeftDiff = game.opts.cellSize; // Difference between left margin of maps                                               // on SetPlaneScene and MainScene\n            const plane = this.myPlanes[planeKey].instance;\n            const planeImage = this.add\n                .image(plane.x - playerMapLeftDiff, plane.y, plane.texture.key)\n                .setAngle(plane.angle)\n                .setAlpha(0.9)\n                .setScale(game.zoom);\n        });\n    }\n\n    // drawPlayerMap(x, y, type = null) {\n    //     const sqareWidth = 40;\n    //     const cellsNum = 8;\n\n    //     for (let i = 0; i < cellsNum; i++) {\n    //         // Go vertical\n    //         for (let j = 0; j < cellsNum; j++) {\n    //             // Go horizontal\n    //             this.drawRect(\n    //                 x + j * sqareWidth,\n    //                 y + i * sqareWidth,\n    //                 sqareWidth,\n    //                 i,\n    //                 j,\n    //                 type\n    //             );\n    //         }\n    //     }\n    // }\n\n    // drawRect(x, y, sqareWidth, i, j, type) {\n    //     let rect = new Phaser.Geom.Rectangle(x, y, sqareWidth, sqareWidth);\n    //     //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n    //     var graphics = this.add.graphics({\n    //         lineStyle: { width: 1, color: 0x0000aa },\n    //     });\n    //     graphics.strokeRectShape(rect);\n\n    //     graphics.setInteractive(\n    //         new Phaser.Geom.Rectangle(x, y, sqareWidth, sqareWidth),\n    //         Phaser.Geom.Rectangle.Contains\n    //     );\n\n    //     const owner = type === 'opponent' ? 'p' : 'o';\n\n    //     const id = `${owner}${j + 1}${i + 1}`;\n    //     this.cells[id] = { graphics, rect };\n    //     // graphics.setData('id', id);\n    //     graphics.on('pointerdown', () => {\n    //         if (type !== 'opponent') return;\n\n    //         if ($.isEmptyObject(this.opponentData)) {\n    //             console.log('opponent not ready yet');\n    //             return;\n    //         }\n\n    //         if (!this.turn.isMyTurn) {\n    //             //console.log('not my turn');\n    //             game.gameData.turn.scaleText();\n    //             return;\n    //         }\n\n    //         this.socket.send({\n    //             action: 'attack',\n    //             cellClicked: id,\n    //         });\n\n    //         const cellNum = `${j + 1}${i + 1}`;\n    //         if (this.opponentData.planesCells.includes(cellNum)) {\n    //             // Targeted point\n    //             graphics = this.add.graphics({\n    //                 fillStyle: { color: 0x800000 },\n    //             });\n    //             graphics.fillRectShape(rect);\n\n    //             const texture =\n    //                 this.opponentData.planesCells[0] == cellNum ||\n    //                 this.opponentData.planesCells[10] == cellNum\n    //                     ? 'fire-cap'\n    //                     : 'fire';\n\n    //             this.add\n    //                 .image(rect.centerX, rect.centerY, texture)\n    //                 .setScale(0.8);\n    //         } else {\n    //             // Missed point\n    //             this.add.image(rect.centerX, rect.centerY, 'x').setScale(0.8);\n    //         }\n\n    //         game.gameData.turn.reverse();\n    //     });\n    // }\n\n    // drawSceneBackground() {\n    //     const x = 0;\n    //     const y = 0;\n    //     const sqareWidth = 40;\n    //     const cellsNum = 20;\n\n    //     for (let i = 0; i < cellsNum; i++) {\n    //         // Go vertical\n    //         for (let j = 0; j < cellsNum; j++) {\n    //             // Go horizontal\n    //             this.drawBgRect(\n    //                 x + j * sqareWidth,\n    //                 y + i * sqareWidth,\n    //                 sqareWidth,\n    //                 i,\n    //                 j\n    //             );\n    //         }\n    //     }\n    // }\n\n    // drawBgRect(x, y, sqareWidth, i, j) {\n    //     let rect = new Phaser.Geom.Rectangle(x, y, sqareWidth, sqareWidth);\n    //     //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n    //     var graphics = this.add.graphics({\n    //         lineStyle: { width: 1, color: 0xeeeeee },\n    //     });\n    //     graphics.strokeRectShape(rect);\n    // }\n}\n\nexport default MainScene;\n","import Background from '../components/Background';\nimport Map from '../components/Map';\nimport Players from '../components/Players';\nimport Plane from '../components/Plane';\nimport Socket from '../Socket';\n\nclass SetPlaneScene extends Phaser.Scene {\n    constructor() {\n        super({\n            key: 'SetPlaneScene',\n            physics: {\n                arcade: {\n                    //debug: true,\n                },\n            },\n        });\n\n        //this.cellSize = 40;\n        this.cells = [];\n\n        this.planes = {};\n        this.planesGameObjects = [];\n    }\n\n    init() {\n        this.cameras.main.setBackgroundColor('#fff');\n    }\n\n    create() {\n        // this.drawSceneBackground();\n        const background = new Background(this);\n\n        // // Setup players\n        //this.players = new Players(this);\n\n        // const x = 120;\n        // const y = 80;\n        // this.drawPlayerMap(x, y);\n        const map = new Map(this, 96, 98);\n\n        //this.plane = new Plane(this);\n        let plane1 = new Plane({\n            scene: this,\n            x: game.config.width / game.zoom / 2 + 200,\n            y: 140,\n            planeNum: 1,\n        });\n\n        this.planesGameObjects.push(plane1);\n\n        let plane2 = new Plane({\n            scene: this,\n            x: game.config.width / game.zoom / 2 + 300,\n            y: 140,\n            planeNum: 2,\n        });\n\n        this.planesGameObjects.push(plane2);\n\n        // Start game btn\n        this.addStartGame();\n\n        let mainScene = game.scene.getScene('MainScene');\n        // mainScene.players = new Players(mainScene);\n\n        // ---\n        this.socket = new Socket();\n        mainScene.socket = this.socket;\n        // ---\n\n        // Set opponent screen\n        // this.scene.stop();\n\n        //new Players(this);\n\n        // ---\n        this.scene\n            .launch('StartScene', {\n                setPlaneScene: this,\n            })\n            .bringToTop('StartScene');\n        // ---\n\n        //\n        //\n        ///\n        // this.scene.launch('SetOpponentScene', {\n        //     setPlaneScene: this,\n        // });\n\n        // setTimeout(() => {\n        //     this.scene.stop('SetOpponentScene');\n        //     this.scene.resume();\n        // }, 4000);\n\n        //debug\n        window.socket = this.socket;\n        window.SetPlaneScene = this;\n\n        // let cls = localStorage.getItem('lastPlaceCells').split(',');\n        // this.drawByCells(cls);\n    }\n\n    addStartGame() {\n        this.add\n            .image(630 * game.zoom, 384 * game.zoom, 'btn-start-game')\n            .setScale(game.zoom)\n            .setInteractive({ useHandCursor: true })\n            .on('pointerup', () => {\n                // let heads = [];\n                let allPlanesCells = [];\n\n                let keys = Object.keys(this.planes);\n                let keysLength = keys.length;\n\n                if (keysLength < 2) {\n                    // add 2 planes\n                    return;\n                }\n\n                for (let i = 0; i < keysLength; i++) {\n                    //heads.push(this.planes[keys[i]].cells[0]);\n                    allPlanesCells = [\n                        ...allPlanesCells,\n                        ...this.planes[keys[i]].cells,\n                    ];\n                }\n\n                //console.log(this.planes);\n\n                this.scene.stop();\n                this.scene.start('MainScene', {\n                    planesData: {\n                        cells: allPlanesCells,\n                        planes: this.planes,\n                    },\n                });\n            });\n    }\n\n    // debug\n    drawByCells(cells) {\n        cells.forEach((cl) => {\n            //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n            var graphics = this.add.graphics({\n                lineStyle: { width: 3, color: 0x000000 },\n            });\n            graphics.strokeRectShape(this.cells[cl].rect);\n        });\n    }\n\n    // drawPlayerMap(x, y) {\n    //     const squareWidth = this.cellSize;\n    //     const cellsNum = 8;\n\n    //     for (let i = 0; i < cellsNum; i++) {\n    //         // Go vertical\n    //         for (let j = 0; j < cellsNum; j++) {\n    //             // Go horizontal\n    //             this.drawRect(\n    //                 x + j * squareWidth,\n    //                 y + i * squareWidth,\n    //                 squareWidth,\n    //                 i,\n    //                 j\n    //             );\n    //         }\n    //     }\n\n    //     this.drawBorder(x, y, squareWidth, cellsNum);\n    // }\n\n    // drawBorder(x, y, squareWidth, cellsNum) {\n    //     let width = squareWidth * cellsNum;\n    //     let rect = new Phaser.Geom.Rectangle(x, y, width, width);\n    //     //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n    //     let graphics = this.add.graphics({\n    //         lineStyle: { width: 3, color: 0x000000 },\n    //     });\n    //     graphics.strokeRectShape(rect);\n\n    //     this.dropZoneRect = rect;\n    // }\n\n    // drawRect(x, y, squareWidth, i, j, type) {\n    //     let rect = new Phaser.Geom.Rectangle(x, y, squareWidth, squareWidth);\n    //     //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n    //     let graphics = this.add.graphics({\n    //         lineStyle: { width: 1, color: 0x000000 },\n    //     });\n    //     graphics.strokeRectShape(rect);\n\n    //     const id = `${j + 1}${i + 1}`;\n\n    //     this.cells[id] = { id, rect };\n    // }\n\n    // drawSceneBackground() {\n    //     const x = 0;\n    //     const y = 0;\n    //     const squareWidth = this.cellSize;\n    //     const cellsNum = 20;\n\n    //     for (let i = 0; i < cellsNum; i++) {\n    //         // Go vertical\n    //         for (let j = 0; j < cellsNum; j++) {\n    //             // Go horizontal\n    //             this.drawBgRect(\n    //                 x + j * squareWidth,\n    //                 y + i * squareWidth,\n    //                 squareWidth,\n    //                 i,\n    //                 j\n    //             );\n    //         }\n    //     }\n    // }\n\n    // drawBgRect(x, y, squareWidth, i, j) {\n    //     let rect = new Phaser.Geom.Rectangle(x, y, squareWidth, squareWidth);\n    //     //   let graphics = this.add.graphics({ fillStyle: { color: 0x0000ff } });\n    //     var graphics = this.add.graphics({\n    //         lineStyle: { width: 1, color: 0xeeeeee },\n    //     });\n    //     graphics.strokeRectShape(rect);\n    // }\n}\n\nexport default SetPlaneScene;\n","class StartScene extends Phaser.Scene {\n    constructor() {\n        super({\n            key: 'StartScene',\n        });\n    }\n\n    init(data) {\n        this.setPlaneScene = data.setPlaneScene;\n    }\n\n    create() {\n        const rect = new Phaser.Geom.Rectangle(\n            0,\n            0,\n            game.config.width,\n            game.config.height\n        );\n        const graphics = this.add.graphics();\n        graphics.fillStyle(0x000000, 0.8);\n        graphics.fillRectShape(rect);\n\n        const playBtn = this.add\n            .image(game.config.width / 2, game.config.height / 2, 'play-btn')\n            .setScale(game.zoom * 0.5)\n            .setAlpha(0.7)\n            .setInteractive({ useHandCursor: true })\n            .on('pointerdown', this.start, this);\n\n        this.tweens.add({\n            targets: [playBtn],\n            scaleX: 0.6,\n            scaleY: 0.6,\n            alpha: 1,\n            duration: 1000,\n            repeat: -1,\n            yoyo: true,\n            ease: 'Circ.easeIn',\n        });\n    }\n\n    start() {\n        this.scene.stop();\n        game.bus.$emit('showSetOpponent');\n        // this.scene.launch('SetOpponentScene', {\n        //     setPlaneScene: this.setPlaneScene,\n        // });\n    }\n}\n\nexport default StartScene;\n","import { render, staticRenderFns } from \"./SetOpponent.vue?vue&type=template&id=580e046a&scoped=true&\"\nimport script from \"./SetOpponent.vue?vue&type=script&lang=js&\"\nexport * from \"./SetOpponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SetOpponent.vue?vue&type=style&index=0&id=580e046a&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"580e046a\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/var/www/html/airplane/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('580e046a')) {\n      api.createRecord('580e046a', component.options)\n    } else {\n      api.reload('580e046a', component.options)\n    }\n    module.hot.accept(\"./SetOpponent.vue?vue&type=template&id=580e046a&scoped=true&\", function () {\n      api.rerender('580e046a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/js/vue-components/SetOpponent.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetOpponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetOpponent.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--7-0!../../../node_modules/style-loader/index.js!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-3!../../../node_modules/sass-loader/dist/cjs.js??ref--7-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetOpponent.vue?vue&type=style&index=0&id=580e046a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/extract-text-webpack-plugin/dist/loader.js??ref--7-0!../../../node_modules/style-loader/index.js!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-3!../../../node_modules/sass-loader/dist/cjs.js??ref--7-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetOpponent.vue?vue&type=style&index=0&id=580e046a&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SetOpponent.vue?vue&type=template&id=580e046a&scoped=true&\"","// removed by extract-text-webpack-plugin"],"sourceRoot":""}